
# Утилита IMRISKS v1.0

## Имитационное моделирование рисков информационной безопасности

Программное обеспечение предоставляющее возможность создать имитационную модель и стратегию обработки рисков информационной безопасности на основе исходных данных об их параметрах.

Решения сторонних авторов что использовались для разработки программного обеспечения, а так же используются для его работы:
- [jQuery v3.7.1](https://jquery.com), для обеспечения быстрого взаимодействия с утилитой за счет технологии AJAX;
- [SimpleXLSX](https://github.com/shuchkin/simplexlsx), для функционала импорта документов в формате XLSX  - автор [Сергей Щучкин](https://github.com/shuchkin);
- [AnyChart](https://www.anychart.com/), для функционала графического представления созданной модели и стратегии обработки рисков.

# [Требования для запуска утилиты и работы с ней]

Программное обеспечение является веб-приложением и требует предварительного развертывания определенной среды для использования (веб-сервера). В качестве среды можно использовать:

- полноценную выделенную систему (Windows\Unix) на физической или виртуальной машине;
- приложения имитирующие локальный веб-сервер, такие как: OsPanel 6 (использовался для разработки), Open Server, DENWER и иные.

Для доступа со стороны пользователя требуется иметь сетевой доступ к среде размещения утилиты. Обращаться к среде (по назначенному ей адресу) для взаимодействия с утилитой необходимо с использованием одного из следующих поддерживаемых интернет браузеров:

- Google Chrome (приоритетный вариант);
- Mozilla Firefox;
- Microsoft Edge.

Вне зависимости от формата выбранной среды она должна включать в себя следующие компоненты для работы:
- Веб-сервер (например, Apache);
- PHP 8.3;
- Модуль SQLITE для PHP.

# [Развертывание среды]

**Инструкция для Windows**

Шаг 1. Установка веб-сервера:

0. Отключить все иные веб-сервера если таковые присутствуют (например, может быть включен IIS).

1. Необходимо скачать веб-сервер Apache. Дистрибутив доступен [здесь](https://www.apachelounge.com/download/).

2. Разместить его в корне локального диска, чтобы итоговый путь получился: **"C:\Apache24"**. Если путь будет выбран иной следует учитывать что дальнейште команды следует вводить с тем путем, что был выбран самостоятельно.

3. Открыть настроечный файл Apache по пути: **"C:\Apache24\conf\httpd.conf"**.

4. Установить путь размещения Apache что выбрали в пункте 2 для параметра **Define SRVROOT** (его можно найти по поиску в файле). Значение должно быть: **Define SRVROOT "c:/Apache24"**. В пути обязательно должен использоваться правый символ слэша (/).

5. Установить Apache в качестве службы. Для этого открыть командную строку (CMD) от имени администратора и ввести команду **C:\Apache24\bin\httpd.exe -k install**. Для деинсталляции использовать с ключом **uninstall**, вместо **install**.

6. Если система запросит разрешение для приложения пользоваться сетевым соединением - выбрать вариант **Разрешить**.

7. Для запуска службы открыть меню пуск и запустить программу **services.msc**, где найти и выбрать службу **Apache2.4**, после чего нажать кнопку **Запустить**. Если тип запуска в окне службы установлен отличный от **Автоматически**, то служба при следующем запуске системы самостоятельно включаться не будет и ручной запуск придется повторять таким образом каждый раз при необходимости.

8. Убедиться что веб-сервер Apache был запущен. Для этого в браузере в адресной строке ввести **localhost** или **127.0.0.1**. В окне должна будет появиться фраза **"It works!"**, что означает успешность установки и настройки веб сервера.

Шаг 2. Установка PHP 8.3 и включение модуля SQLITE

0. Необходимо скачать PHP 8.3. Дистрибутив доступен [здесь](https://windows.php.net/download#php-8.3). Выбирать вариант **Thread Safe**.
1. Распаковать загруженный дистрибутив в корень локального диска, чтобы итоговый путь к нему получился **"C:\PHP"**.
2. Открыть командную строку (CMD) от имени администратора и ввести туда команду **rundll32 sysdm.cpl,EditEnvironmentVariables**.
3. В открывшемся окне в нижней части в списке **Системные переменные** выбрать переменную **Path** и нажать кнопку **Изменить**.
4. Далее нажать кнопку **Создать** и ввести путь размещения извлеченного дистрибутива PHP из пункта 1, после чего добавление подтвердить, а окно закрыть.
5. настроить PHP ддля работы с Apache. Открыть настроечный файл Apache по пути **C:\Apache24\conf\httpd.conf**. Добавить в него следующие строки (в начало или конец файла). Если самостоятельно при установке менялся путь на какой-либо друго из инструкции - тут его следует поменять, учитывая что должен использоваться символ правый слэш (/):

> - PHPIniDir "C:/PHP"
> - LoadModule php_module "C:/PHP/php8apache2_4.dll"
> - AddType application/x-httpd-php .php
> - DirectoryIndex index.php index.html

6. Перейти в папку с PHP (C:/PHP), найти в ней файл **php.ini-production**, сделать его копию в ту же самую папку, но так, чтобы имя файла осталось **php.ini** (то есть, убрать из расширения **"-production"**).
7. В созданном файле найти строки **;extension=sqlite3** и **;extension=pdo_sqlite**, убрать перед ними символ точки с запятой (;), после чего файл сохранить и закрыть.
8. Перезапустить службу Apache (делается аналогично включению, только с нажатием перед этим кнопки **Остановить**, а затем **Запустить**).

Шаг 3. Размещение утилиты на веб-сервере и проверка результатов настройки

1. Скачать актуальные файлы утилиты с настоящей страницы (**Code** -> **Download Zip**).
2. Извлечь файлы из скачанного архива по пути **C:\Apache24\htdocs** (или по иному пути, если менялся в ходе настройки, но именно в папку **htdocs**).
3. Открыть в одном из предложенных браузеров адрес **localhost** или **127.0.0.1**. Должна открыться страница утилиты с выбором проектов для работы.
4. На этом развертывание **завершено**.

# [Работа с утилитой]

### **Что из себя представляет работа с утилитой?**
Работа с утилитой выстроена в формате взаимодействия с проектами. В стартовом окне располагается их список с возможностью повторного открытия, очистки и создания новых. Работая с проектом происходит последовательный ввод, сопоставление и фиксация исходных данных так или иначе описывающих риски информационной безопасности на основе которых требуется построить имитационную модель и стратегию их обработки.

### **Что такое проект?**
Проект содержит в себе информацию о всех введенных в рамках работы с ним исходных данных и зафиксированных расчетах, а так же информацию о том какие этапы были выполнены, кто автор проекта, когда он был создан, условия генерации. Итоговым результатом работы с проектом является созданная имитационная модель в табличном виде и графическом представлении (в виде интерактивного линейного графика).

### **Как создать новый проект?**
Для создания нового проекта требуется нажать кнопку "**Новый**" на стартовой странице утилиты и заполнить информацию о проекте (имя, автор, описание, статус опции имитации отклонений), после чего подтвердить его создание.

### **Можно ли посмотреть пример работы без создания проекта с нуля?**
Да, в утилите для демонстрации результатов ее работы сразу представлены 2 тестовых проекта.

### **Какие исходные данные потребуются в рамках работы с проектом?** 
На разных этапах понядобятся следующие данные:
- классификация параметров рисков информационной безопасности которые приняты и используются для их описания в организации где происходит моделирование - максимальный уровень угроз, максимальный уровень уязвимости активов, максимальный уровень ценности актива (**числовые значения от 1 до 5**);

- допустимые и критичные значения описывающие серьезность рисков информационной безопасности по отношению к абстрактному информационному активу, выражающуюся из суммы значений параметров которые его описывают (**числовые значения от 1 до 15**);

- описание информационного актива который будет участвовать в моделировании, а именно его название, владелец, тип, уровень ценности, расположения, уровень уязвимости. Уровни уязвимости и ценности не могут превышать те, что описывались на этапе ввода информации о классификации параметров;
 
- описание потенциальных известных угроз которые будут фигурировать в моделировании, а именно их название и уровень. Уровень не может превышать тот, что описывался на этапе ввода информации о классификации параметров;

- подверженность указанных активов описанным угрозам (одной или нескольким сразу);

- детализация потенциального ущерба для каждого из уровней ценности активов (в формате диапазона значений с нижней и верхней границей, например от 0 и до 1000);
 
- описание планируемых к использованию контрмер, а именно их наименование и стоимость внедрения за 1 штуку;

- применимость описанных контрмер к определенным в утилите рискам и его отнесение к конкретному варианту обработки;

- интересующий вариант стратегии (из предлагаемых). 

### **Какие этапы в рамках проекта предстоит выполнить для создания модели?**
Всего при работе с проектом предстоит выполнить 10 этапов, а именно:

1. "Определение критериев параметров" - заполнение информации о классификации параметров рисков.

2. "Определение активов и их ценности" - заполнение информации об информационных активах участвующих в моделировании.

3. "Определение угроз" - заполнение информации об угрозах участвующих в моделировании.

4. "Связь активов и угроз" - сопоставление между собой указанных на предыдущих этапах активах и угрозах на основе экспертной оценки.

5. "Определение диапазона ущерба" - заполнение сумм в диапазоне которых может находится стоимость актива в зависимости от его уровня ценности.

6. "Фиксация матрицы рисков" - ознакомление с промежуточными результатами моделирования и списком определенных рисков, их подтверждение.

7. "Опредедение контрмер" - заполнение информации о контрмерах участвующих в моделировании.

8. "Связь контрмер и вариантов обработки рисков" - сопоставление между собой определенных рисков и контрмер которые будут использованы для их обработки, выбор варианта обработки для каждого из рисков.

9. "Расчёт сумм ущерба и отклонений при их моделировании" - ознакомление с промежуточными результатами моделирования и погрешностью расчетов.

10. "Результаты моделирования" - ознакомление с результатами работы с проектом, просмотр матрицы рисков и вариантов их обработки, эффектов от предлагаемых стратегий обработки (в том числе в графическом представлении).

### **Можно ли импортировать в утилиту уже готовые данные?**
Да, на этапах по заполнению информации (об активах, угрозах и контрмерах) можно импортировать данные для пропуска шага с их ручным заполнением. Для этого требуется использовать соответствующую кнопку "**Импортировать из файла**". Данные в файле должны быть в соответствующем формате. Шаблон файла который демонстрирует требуемый формат и пример его заполнения доступен для скачивания при нажатии на соответствующую кнопку **"Скачать шаблон для импорта**".

### **Как завершить работу с этапом?**
Завершение работы производится с помощью нажатия кнопки "**Завершить работу с этапом**". Для разблокировки этой кнопки требуется предварительно сохранить внесенные в этам изменения используя соответствующую кнопку "**Сохранить изменения**".

### **Почему кнопка сохранения изменений у меня заблокирована?**
Потому что на этап не было внесено информации при первичной работе с ним, а при повторном обращении к этапу еще не было внесено изменений. Для разблокировки требуется ввести хотя бы 1 символ в поля с информацией этапа.

### **Как изменить данные на предыдущем этапе?**
Для изменения данных на предыдущем этапе требуется переключиться на этот этап при открытом проекте используя его номер. Выполненные этапы доступные для редактирования отмечены зеленым цветом. Необходимо учитывать, что изменение данных на предыдущем этапе сбросит информацию на последующих за ним. О таких сбросах утилита будет показывать предупреждения с необходимостью подтверждения.

### **Почему номера этапов разного цвета?**
Разные цвета отражают разный статус этапа. Есть следующие статусы:
- **Телесный** - текущий выбранный для работы этап;
- **Серый** - заблокированный для работы этап, он разблокируется как предыдущий за ним будет выполнен;
- **Синий** - актуальный, крайний этап по которому еще не произведено завершение работы

### **Как добавлять\удалять поля для описания активов, угроз и контрмер?**
Добавление полей для заполнения осуществляется с помощью элемента в виде символа "**плюс**", который находится по центру под последним добавленным полем. Удаление же производится с помощью элемента в виде символа "**крестик**", который располагается справа от каждого поля которое можно удалить.

### **Сохранятся ли результаты моей работы после закрытия страницы браузера в которой открыта утилита?**
Да, работу с проектом можно прерывать и возвращаться к тому месту на котором она была остановлена. Если этап еще требует внесения дополнительной информации, то для ее промежуточного сохранения обязательно необходимо использовать кнопку "**Сохранить изменения**". Проект же в дальнейшем будет доступен для открытия через список на стартовой странице утилиты. При открытии проекта всегда открывается его актуальный этап.

### **Не получается перейти на актуальный этап по нажатию на соответствующий номера этапа**
Переход к актуальному этапу производится отдельной кнопкой "**Актуальный этап**".

### **Как вернуться на стартовый экран утилиты к списку проектов?**
Возврат к предыдущим меню производится с помощью элемента в виде **черного круга со стрелкой** в левой верхней части утилиты.

### **Можно ли как то отредактировать информацию о проекте?**
Да. После открытия проекта информацию о нем (имя, автор, описание, статус опции имитации отклонений) можно менять при переходе в соответствующее меню через элемент в виде **шестеренки** в правой верхней части утилиты, подтверждая изменения кнопкой "**Обновить информацию**".

### **Можно ли удалить проект?**
Да. Можно удалить либо все проекты в системе используя кнопку "**Очистить**", либо конкретный проект на странице его редактирования используя кнопку "**Удалить проект**". Проекты после удаления восстановить нельзя.

### **Как экспортировать\импортировать проекты?**
Такой функционал отсутствует. Единственный способ перенести информацию утитилы (проекты и списки значений) с одной среды на другую это путем перемещения файла **database.db** в корне утилиты.

### **Что такое списки значений?**
Списки значений это меню доступное для открытия со стартовой страницы утилиты по нажатию кнопки "**Списки**"". Добавленные в этом меню значения по разным категориям (угрозы, виды активов, расположения активов, контрмеры) позволят при работе с проектами использовать их без необходимости полного повторного ввода готовые варианты данных - эти начения будут высвечиваться в качестве предложений быстрого ввода по нажатию на соответствующие поля или в момент когда вы уже частично заполнили поле похожим значением что имеется в списках.

### **Списки значений обязательно заполнять?**
Нет, это опционально и сделано для пользовательского удобства.

### **Списки значений можно импортировать в утилиту?**
Да, как и в случае с другими вводимыми в утилиту данными. Необходимо иметь подготовленнй шаблон в особом формате (он доступен для скачивания по соответствующей кнопке). Заполненный файл необходимо импортировать используя соответствующую кнопку на странице списков.

### **Можно ли удалять значения списков?**
Да, для этого необходимо отметить требуемые к удалению значения и нажать кнопку "**Удалить выделенные**". Можно выделить сразу всю категорию, если выделять через простановку галки напротив названия категории. так же можно полностью очистить списки соответствующей кнопкой "**Удалить все**".

### **Как добавлять значения списков по одному?**
Под каждой из категорий присутствует поле для ввода. необходимо ввести в него значение и нажать кнопку с символом "**Плюс**".

### **Что значит опция имитировать отклонения при оценке ущерба от угроз?**
При включении этой опции на этапе №6 ("Фиксация матрицы рисков") для каждого из активов будет предпринята попытка увеличить или уменшить указанный уровено стоимости актива на единицу. Таким образом будет имитироваться ситуация когда специалист мог неверно определить уровень ценности актива. Те риски по отношению к активам которых была применена имитация в матрице рисков будут выделены красным цветом.

### **Как посмотреть предлагаемую стратегию в динамическом графическом представлении?**
Это возможно когда был достигнут этап №10. Необходимо с помощью соответствующего элемента списка ("**Текущая стратегия**") выбрать существующие варианты стратегий и нажать кнопку "**Сформировать график**".

### **Почему график называется интерактивным?**
Интерактивным он называется по причине возможности взаимодействия с элементами графика с помощью курсора.

### **Как поменять стратегию?**
Если график уже отрисован, то необходимо надать соответствующий элемент **круг со стрелкой** в левой верхней части утилиты и изменить стратегию через элемент списка ("**Текущая стратегия**"), после чего снова сформировать график. Изменения в самой таблицы повторной отрисовки графика не требуют, они применяются сразу после выбора другого варианта стратегии из списка. 

### **Чем стратегии отличаютс друг от друга?**
Меняется порядок сортировки столбцов итоговой матрицы рисков, описывающих затраты на реализацию контрмер, ущерб и другие.

### **Можно ли экспортировать таблицу и график с результатами?**
Такой функционал не предусмотрен. Таблицу можно выделить курсором, скопировать и вставить в открытую таблицу Excel. График возможно сохранить только через скриншот.

### **Если заметил ошибку в работе, как о ней можно сообщить?**
Это возможно сделать через вкладку Issues\Проблемы в любом из репозиториев где размещена настоящая утилита.